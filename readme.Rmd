---
title: tradeR
date: "Last update: `r Sys.time()` in `r Sys.timezone()`"
output:
  html_document:
    code_folding: "hide"
    theme: sandstone
    highlight: tango
---

```{r}
library("rjson")
```

# Fetch prices
```{r}
# Look for files of interest
files <- list.files(path = "tmp", pattern = "*.json", full.names = TRUE)
stopifnot(length(files) > 0)
```

```{r}
extract <- function(f){
  raw = fromJSON(file = f)
  p <-sapply (raw$Data[1:5], function(x) x$open)
  as.data.frame(p)
}

prices <-sapply(files, extract)
```

# Linear regression
```{r}
for (y in prices) {

  # Do linear regression
  x <- 1:length(y)
  relation <- lm(y ~ x)

  plot(x, y, col = "darkgreen", main = "hi", 
    abline(relation, col="red"), xlab = "minutes", ylab = "USD")
}
```

# Normalise
```{r}
# Take a copy to normalise
n = prices

for (y in n) {
  low = min(y)
  high = max(y)

  y = y - low
  y = y / (high - low)
}

matplot(n, pch = 1)
```