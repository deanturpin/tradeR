---
title: tradeR
date: "Last update: `r Sys.time()`"
output:
  html_document:
    code_folding: "hide"
    theme: sandstone
    highlight: tango
---

# Fetch prices
```{r}
files = list.files(path = "tmp", pattern = "*.json", full.names = TRUE)
stopifnot(length(files) > 0)
print(files)
```

# Correlation
```{r}
# Get the times from the first coin
library("rjson")
raw = fromJSON(file = files[1])
prices = c(); for (observation in raw$Data) prices = c(prices, observation$time)

# Fix time offset
prices = prices - prices[1]

# Add a new column for each coin
for (f in files) {
  raw = fromJSON(file = f)
  p = c(); for (observation in raw$Data) p = c(p, observation$close)
  prices = cbind(prices, p)
}

cors = c()
for (i in 3:12) cors = c(cors, cor(prices[,2], prices[,i]))

plot(cors)
```

# Linear regression
```{r}
x <- prices[,1]
for (i in 3:12) {

  cors = c(cors, cor(prices[,2], prices[,i]))
  y <- prices[,i]

  relation <- lm(y ~ x)

  plot(x, y, col = "orange", main = f, abline(relation))
}
```
