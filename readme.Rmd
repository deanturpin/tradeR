---
title: tradeR
date: "Last update: `r Sys.time()`"
output:
  html_document:
    code_folding: "hide"
    theme: sandstone
    highlight: tango
---

# Fetch prices
```{r}
# Look for files of interest
files = list.files(path = "tmp", pattern = "*.json", full.names = TRUE)
stopifnot(length(files) > 0)
print(files)

# Get the times from the first coin
library("rjson")
raw = fromJSON(file = files[1])
prices = c(); for (observation in raw$Data) prices = c(prices, observation$time)

# Fix time offset (Epoch to friendly units)
prices = prices - prices[1]
prices = prices / 3600

# Add a new column for each coin
for (f in files) {
  raw = fromJSON(file = f)
  p = c(); for (observation in raw$Data) p = c(p, observation$close)
  prices <- cbind(prices, p)
}
```

# Linear regression
```{r}
# X-axis is time
x <- prices[,1]

# Plot prices on the Y-axis
for (i in 3:12) {

  y <- prices[,i]
  relation <- lm(y ~ x)

  plot(x, y, col = "orange", main = files[i - 1], 
       abline(relation), xlab = "hours", ylab = "USD")
}
```

# Correlation
```{r}
for (i in 3:12) {
  cor(prices[,2], prices[,i])
  plot(prices[,2], prices[,i])
}
```
