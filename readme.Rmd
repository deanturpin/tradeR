---
title: tradeR
date: "last update: `r format(Sys.Date(), format = '%d %B %Y')`"
output:
  html_document:
    theme: cosmo
    highlight: tango
---

# Fetch prices
```{r}
files = list.files(path = "tmp", pattern = "*.json", full.names = TRUE)

stopifnot(length(files) > 0)
print(files)
```

# Let's munge some JSON
```{r}
library("rjson")

for (f in files) {

  print(f)
  raw = fromJSON(file = f)

  prices = list()
  for (observation in raw$Data) prices = rbind.data.frame(prices, observation)

  time = unlist(prices$time)
  coin = unlist(prices$close)

  summary(coin)

  matplot(time, coin, pch=1, xlab = "seconds", ylab = "USD")
}

```

# Correlation
```{r}
# Get the times from the first coin
raw = fromJSON(file = files[2])
prices = c(); for (observation in raw$Data) prices = c(prices, observation$time)

# Add a new column for each coin
for (f in files) {
  raw = fromJSON(file = f)
  p = c(); for (observation in raw$Data) p = c(p, observation$close)
  prices = cbind(prices, p)
}

cors = c()
for (i in 3:12) {
  cors = c(cors, cor(prices[,2], prices[,i]))
}

print(cors)
plot(cors)
```


